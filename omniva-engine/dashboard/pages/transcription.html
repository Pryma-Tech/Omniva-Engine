{% extends "layout.html" %}
{% block content %}
<h2>Transcription Manager (Placeholder)</h2>

<h3>Run Fake Transcription</h3>
<input id="pid" placeholder="Project ID" />
<input id="path" placeholder="Video path" />
<button onclick="runTrans()">Run</button>

<pre id="output">Results will appear here</pre>

<h3>All Transcript Jobs</h3>
<pre id="all">Loading...</pre>

<script>
function runTrans() {
    const pid = document.getElementById("pid").value;
    const path = document.getElementById("path").value;

    fetch("/transcription/run", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({project_id: pid, video_path: path})
    })
    .then(r => r.json())
    .then(data => {
        document.getElementById("output").textContent = JSON.stringify(data, null, 2);
        loadAll();
    })
    .catch(() => {
        document.getElementById("output").textContent = "Failed to run transcription";
    });
}

function loadAll() {
    fetch("/transcription")
        .then(r => r.json())
        .then(data => {
            document.getElementById("all").textContent = JSON.stringify(data, null, 2);
        })
        .catch(() => {
            document.getElementById("all").textContent = "Failed to load transcript jobs";
        });
}

loadAll();
</script>

{% endblock %}
